(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2323:(e,s,a)=>{Promise.resolve().then(a.bind(a,2791))},2791:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eZ});var t=a(5155),l=a(2115),r=a(8145),n=a(7168),i=a(8482),d=a(3999);function c(e){let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,d.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}var o=a(8764),x=a(6474),m=a(5196),h=a(7863);function u(e){let{...s}=e;return(0,t.jsx)(o.bL,{"data-slot":"select",...s})}function p(e){let{...s}=e;return(0,t.jsx)(o.WT,{"data-slot":"select-value",...s})}function j(e){let{className:s,size:a="default",children:l,...r}=e;return(0,t.jsxs)(o.l9,{"data-slot":"select-trigger","data-size":a,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[l,(0,t.jsx)(o.In,{asChild:!0,children:(0,t.jsx)(x.A,{className:"size-4 opacity-50"})})]})}function g(e){let{className:s,children:a,position:l="popper",...r}=e;return(0,t.jsx)(o.ZL,{children:(0,t.jsxs)(o.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...r,children:[(0,t.jsx)(f,{}),(0,t.jsx)(o.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,t.jsx)(N,{})]})})}function v(e){let{className:s,children:a,...l}=e;return(0,t.jsxs)(o.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...l,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(o.VF,{children:(0,t.jsx)(m.A,{className:"size-4"})})}),(0,t.jsx)(o.p4,{children:a})]})}function f(e){let{className:s,...a}=e;return(0,t.jsx)(o.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,t.jsx)(h.A,{className:"size-4"})})}function N(e){let{className:s,...a}=e;return(0,t.jsx)(o.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,t.jsx)(x.A,{className:"size-4"})})}var y=a(4964),w=a(1397),b=a(6721),k=a(4416);let C=b.bL,S=b.l9,D=b.ZL;b.bm;let A=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(b.hJ,{ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});A.displayName=b.hJ.displayName;let W=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(D,{children:[(0,t.jsx)(A,{}),(0,t.jsxs)(b.UC,{ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[l,(0,t.jsxs)(b.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(k.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});W.displayName=b.UC.displayName;let R=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};R.displayName="DialogHeader";let z=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(b.hE,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});z.displayName=b.hE.displayName;let T=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(b.VY,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a),...l})});T.displayName=b.VY.displayName;var O=a(9474),I=a(2714);let L=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,d.cn)("w-full caption-bottom text-sm",a),...l})})});L.displayName="Table";let E=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("thead",{ref:s,className:(0,d.cn)("[&_tr]:border-b",a),...l})});E.displayName="TableHeader";let P=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...l})});P.displayName="TableBody",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let J=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("tr",{ref:s,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});J.displayName="TableRow";let M=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("th",{ref:s,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});M.displayName="TableHead";let B=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("td",{ref:s,className:(0,d.cn)("p-4 align-top [&:has([role=checkbox])]:pr-0",a),...l})});B.displayName="TableCell",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("caption",{ref:s,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var $=a(523);let Z=$.bL;$.R6;let _=$.Ke;var F=a(4616),V=a(7924),q=a(3332),U=a(1482),K=a(3052),X=a(4186),Y=a(9074),H=a(6785),G=a(1243),Q=a(1497),ee=a(3717),es=a(7580),ea=a(4283),et=a(9663),el=a(3109),er=a(9037),en=a(8883),ei=a(9420),ed=a(8319);let ec=[{id:1,name:"张三",email:"zhangsan@company.com",role:"产品经理",department:"产品部",avatar:"/placeholder.svg?height=40&width=40",phone:"138-0000-1111",joinDate:"2023-01-15",skills:["产品设计","需求分析","用户研究"],currentProjects:[1,3],workload:85,performance:92},{id:2,name:"李四",email:"lisi@company.com",role:"前端开发",department:"技术部",avatar:"/placeholder.svg?height=40&width=40",phone:"138-0000-2222",joinDate:"2023-03-10",skills:["React","TypeScript","前端架构"],currentProjects:[1,2],workload:90,performance:88},{id:3,name:"王五",email:"wangwu@company.com",role:"后端开发",department:"技术部",avatar:"/placeholder.svg?height=40&width=40",phone:"138-0000-3333",joinDate:"2022-11-20",skills:["Node.js","Python","数据库设计"],currentProjects:[1,2,5],workload:95,performance:95},{id:4,name:"赵六",email:"zhaoliu@company.com",role:"数据工程师",department:"数据部",avatar:"/placeholder.svg?height=40&width=40",phone:"138-0000-4444",joinDate:"2023-05-08",skills:["数据分析","机器学习","数据可视化"],currentProjects:[3],workload:70,performance:89},{id:5,name:"钱七",email:"qianqi@company.com",role:"测试工程师",department:"质量部",avatar:"/placeholder.svg?height=40&width=40",phone:"138-0000-5555",joinDate:"2023-02-14",skills:["自动化测试","性能测试","测试用例设计"],currentProjects:[1,4],workload:75,performance:87}];function eo(){let{projects:e}=(0,ea.Y)(),[s,a]=(0,l.useState)(()=>{let e=ed.DT.getTeamMembers();return e.length>0?e:ec}),[d,o]=(0,l.useState)(""),[x,m]=(0,l.useState)("all"),[h,f]=(0,l.useState)("all"),[N,y]=(0,l.useState)(!1),[b,k]=(0,l.useState)(null),[S,D]=(0,l.useState)({name:"",email:"",role:"",department:"",phone:"",skills:[],workload:0,performance:0}),A=e=>{a(e),ed.DT.saveTeamMembers(e)},O=s.filter(e=>{let s=e.name.toLowerCase().includes(d.toLowerCase())||e.email.toLowerCase().includes(d.toLowerCase()),a="all"===x||e.department===x,t="all"===h||e.role===h;return s&&a&&t}),$=s=>e.filter(e=>s.includes(e.id)),Z=e=>{k(e),D(e)},_={totalMembers:s.length,avgWorkload:Math.round(s.reduce((e,s)=>e+s.workload,0)/s.length),avgPerformance:Math.round(s.reduce((e,s)=>e+s.performance,0)/s.length),busyMembers:s.filter(e=>e.workload>80).length},q=[...new Set(s.map(e=>e.department))],U=[...new Set(s.map(e=>e.role))];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"团队成员总数"}),(0,t.jsx)(es.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:_.totalMembers}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"活跃成员数量"})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"平均工作量"}),(0,t.jsx)(el.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[_.avgWorkload,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"团队平均工作负荷"})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"平均绩效"}),(0,t.jsx)(er.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:_.avgPerformance}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"团队整体表现"})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"高负荷成员"}),(0,t.jsx)(H.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:_.busyMembers}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"工作量 > 80%"})]})]})]}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(V.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)(c,{placeholder:"搜索成员姓名或邮箱...",value:d,onChange:e=>o(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(u,{value:x,onValueChange:m,children:[(0,t.jsx)(j,{className:"w-[150px]",children:(0,t.jsx)(p,{placeholder:"部门筛选"})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"all",children:"全部部门"}),q.map(e=>(0,t.jsx)(v,{value:e,children:e},e))]})]}),(0,t.jsxs)(u,{value:h,onValueChange:f,children:[(0,t.jsx)(j,{className:"w-[150px]",children:(0,t.jsx)(p,{placeholder:"角色筛选"})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"all",children:"全部角色"}),U.map(e=>(0,t.jsx)(v,{value:e,children:e},e))]})]}),(0,t.jsxs)(n.$,{onClick:()=>y(!0),children:[(0,t.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"添加成员"]})]})})}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"团队成员"}),(0,t.jsx)(i.BT,{children:"管理团队成员信息和项目分配"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(L,{children:[(0,t.jsx)(E,{children:(0,t.jsxs)(J,{children:[(0,t.jsx)(M,{children:"成员信息"}),(0,t.jsx)(M,{children:"部门/角色"}),(0,t.jsx)(M,{children:"技能"}),(0,t.jsx)(M,{children:"当前项目"}),(0,t.jsx)(M,{children:"工作量"}),(0,t.jsx)(M,{children:"绩效"}),(0,t.jsx)(M,{children:"联系方式"}),(0,t.jsx)(M,{children:"操作"})]})}),(0,t.jsx)(P,{children:O.map(e=>(0,t.jsxs)(J,{children:[(0,t.jsx)(B,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(et.eu,{children:[(0,t.jsx)(et.BK,{src:e.avatar}),(0,t.jsx)(et.q5,{children:e.name[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["入职: ",e.joinDate]})]})]})}),(0,t.jsx)(B,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.E,{variant:"outline",className:"mb-1",children:e.department}),(0,t.jsx)("p",{className:"text-sm",children:e.role})]})}),(0,t.jsx)(B,{children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.skills.slice(0,2).map(e=>(0,t.jsx)(r.E,{variant:"secondary",className:"text-xs",children:e},e)),e.skills.length>2&&(0,t.jsxs)(r.E,{variant:"secondary",className:"text-xs",children:["+",e.skills.length-2]})]})}),(0,t.jsx)(B,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[$(e.currentProjects).slice(0,2).map(e=>(0,t.jsx)("div",{className:"text-xs",children:(0,t.jsx)(r.E,{variant:"outline",className:"text-xs",children:e.name})},e.id)),e.currentProjects.length>2&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.currentProjects.length-2," 个项目"]})]})}),(0,t.jsx)(B,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(w.k,{value:e.workload,className:"h-2"}),(0,t.jsxs)("span",{className:"text-sm",children:[e.workload,"%"]})]})}),(0,t.jsx)(B,{children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:e.performance}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"评分"})]})}),(0,t.jsx)(B,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(en.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{className:"truncate max-w-[100px]",children:e.email})]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,t.jsx)(ei.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.phone})]})]})}),(0,t.jsx)(B,{children:(0,t.jsx)("div",{className:"flex gap-1",children:(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>Z(e),children:(0,t.jsx)(ee.A,{className:"w-3 h-3"})})})})]},e.id))})]})})]}),(0,t.jsx)(C,{open:N||!!b,onOpenChange:e=>{e||(y(!1),k(null),D({}))},children:(0,t.jsxs)(W,{className:"sm:max-w-md",children:[(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{children:b?"编辑成员":"添加新成员"}),(0,t.jsx)(T,{children:b?"修改成员信息":"填写新成员的基本信息"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"name",children:"姓名"}),(0,t.jsx)(c,{id:"name",value:S.name||"",onChange:e=>D({...S,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"email",children:"邮箱"}),(0,t.jsx)(c,{id:"email",type:"email",value:S.email||"",onChange:e=>D({...S,email:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"role",children:"角色"}),(0,t.jsx)(c,{id:"role",value:S.role||"",onChange:e=>D({...S,role:e.target.value}),placeholder:"如：前端开发"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"department",children:"部门"}),(0,t.jsx)(c,{id:"department",value:S.department||"",onChange:e=>D({...S,department:e.target.value}),placeholder:"如：技术部"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"phone",children:"电话"}),(0,t.jsx)(c,{id:"phone",value:S.phone||"",onChange:e=>D({...S,phone:e.target.value}),placeholder:"138-0000-0000"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"workload",children:"工作量 (%)"}),(0,t.jsx)(c,{id:"workload",type:"number",min:"0",max:"100",value:S.workload||"",onChange:e=>D({...S,workload:parseInt(e.target.value)||0})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"performance",children:"绩效评分"}),(0,t.jsx)(c,{id:"performance",type:"number",min:"0",max:"100",value:S.performance||"",onChange:e=>D({...S,performance:parseInt(e.target.value)||0})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>{y(!1),k(null),D({})},children:"取消"}),(0,t.jsx)(n.$,{onClick:b?()=>{b&&S.name&&S.email&&(A(s.map(e=>e.id===b.id?{...e,...S}:e)),k(null),D({}))}:()=>{if(S.name&&S.email&&S.role&&S.department){let e={id:Math.max(0,...s.map(e=>e.id))+1,name:S.name,email:S.email,role:S.role,department:S.department,avatar:"/placeholder.svg?height=40&width=40",phone:S.phone||"",joinDate:new Date().toISOString().split("T")[0],skills:S.skills||[],currentProjects:[],workload:S.workload||0,performance:S.performance||0};A([...s,e]),D({}),y(!1)}},children:b?"保存":"添加"})]})]})]})})]})}var ex=a(6981);function em(e){let{className:s,...a}=e;return(0,t.jsx)(ex.bL,{"data-slot":"checkbox",className:(0,d.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(ex.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(m.A,{className:"size-3.5"})})})}var eh=a(1788),eu=a(7434),ep=a(4261),ej=a(9869),eg=a(2118),ev=a(5339);function ef(){let{projects:e}=(0,ea.Y)(),[s,a]=(0,l.useState)({projects:!0,teamMembers:!0,milestones:!0,requirements:!0,updates:!0,risks:!0}),[d,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(0),[m,h]=(0,l.useState)(!1),u=async()=>{c(!0),x(0);try{let a={};s.projects&&(x(20),a.projects=e),s.teamMembers&&(x(40),a.teamMembers=ed.DT.getTeamMembers()),s.milestones&&(x(60),a.milestones=e.flatMap(e=>Object.entries(e.milestones).map(s=>{let[a,t]=s;return{projectId:e.id,projectName:e.name,milestoneName:a,...t}}))),s.requirements&&(x(80),a.requirements=e.flatMap(e=>e.requirements.map(s=>({projectId:e.id,projectName:e.name,...s})))),s.updates&&(a.updates=e.flatMap(e=>(e.updates||[]).map(s=>({projectId:e.id,projectName:e.name,...s})))),s.risks&&(a.risks=e.flatMap(e=>e.risks.map(s=>({projectId:e.id,projectName:e.name,...s})))),x(100),a.exportInfo={exportDate:new Date().toISOString(),version:"1.0",totalProjects:e.length,totalTeamMembers:ed.DT.getTeamMembers().length};let t=JSON.stringify(a,null,2),l=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(l),n=document.createElement("a");n.href=r,n.download="project-management-export-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),h(!1)}catch(e){console.error("导出失败:",e),alert("导出失败，请重试")}finally{c(!1),x(0)}},p=async()=>{c(!0);try{if(s.projects){let s=[["ID","项目名称","描述","状态","优先级","分类","进度","开始时间","结束时间","负责人","最后更新"],...e.map(e=>[e.id,e.name,e.description,e.status,e.priority,e.category,e.progress,e.startDate,e.endDate,e.owner.name,e.lastUpdate])].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),a=new Blob(["\uFEFF"+s],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="projects-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)}h(!1)}catch(e){console.error("CSV导出失败:",e),alert("CSV导出失败，请重试")}finally{c(!1)}},j=()=>{let a=0;return s.projects&&(a+=e.length),s.teamMembers&&(a+=ed.DT.getTeamMembers().length),s.milestones&&(a+=e.reduce((e,s)=>e+Object.keys(s.milestones).length,0)),s.requirements&&(a+=e.reduce((e,s)=>e+s.requirements.length,0)),s.updates&&(a+=e.reduce((e,s)=>{var a;return e+((null===(a=s.updates)||void 0===a?void 0:a.length)||0)},0)),s.risks&&(a+=e.reduce((e,s)=>e+s.risks.length,0)),a};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(eh.A,{className:"w-5 h-5"}),"数据导出"]}),(0,t.jsx)(i.BT,{children:"导出项目管理数据到本地文件，支持JSON和CSV格式"})]}),(0,t.jsx)(i.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"当前数据概览"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"项目数:"}),(0,t.jsx)(r.E,{variant:"secondary",children:e.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"团队成员:"}),(0,t.jsx)(r.E,{variant:"secondary",children:ed.DT.getTeamMembers().length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"里程碑:"}),(0,t.jsx)(r.E,{variant:"secondary",children:e.reduce((e,s)=>e+Object.keys(s.milestones).length,0)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"需求:"}),(0,t.jsx)(r.E,{variant:"secondary",children:e.reduce((e,s)=>e+s.requirements.length,0)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"选择导出内容"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(s).map(e=>{let[s,l]=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(em,{id:s,checked:l,onCheckedChange:e=>a(a=>({...a,[s]:e}))}),(0,t.jsx)(I.J,{htmlFor:s,className:"text-sm",children:"projects"===s?"项目信息":"teamMembers"===s?"团队成员":"milestones"===s?"里程碑":"requirements"===s?"需求":"updates"===s?"项目动态":"风险信息"})]},s)})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"导出操作"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(C,{open:m,onOpenChange:h,children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)(n.$,{className:"w-full",disabled:0===j(),children:[(0,t.jsx)(eu.A,{className:"w-4 h-4 mr-2"}),"导出为JSON (",j()," 项)"]})}),(0,t.jsxs)(W,{children:[(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{children:"确认导出数据"}),(0,t.jsxs)(T,{children:["即将导出 ",j()," 项数据到JSON文件"]})]}),d&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"导出进度:"}),(0,t.jsxs)("span",{children:[o,"%"]})]}),(0,t.jsx)(w.k,{value:o})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>h(!1),disabled:d,children:"取消"}),(0,t.jsx)(n.$,{onClick:u,disabled:d,children:d?"导出中...":"开始导出"})]})]})]}),(0,t.jsxs)(n.$,{variant:"outline",className:"w-full",onClick:p,disabled:!s.projects||d,children:[(0,t.jsx)(ep.A,{className:"w-4 h-4 mr-2"}),"导出项目为CSV"]})]})]})]})})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(ej.A,{className:"w-5 h-5"}),"数据导入"]}),(0,t.jsx)(i.BT,{children:"从本地JSON文件导入项目管理数据"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(eg.A,{className:"w-12 h-12 mx-auto text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"选择JSON文件导入"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"支持从本系统导出的JSON文件"})]}),(0,t.jsxs)("label",{htmlFor:"import-file",className:"cursor-pointer",children:[(0,t.jsx)(n.$,{variant:"outline",className:"mt-2",asChild:!0,children:(0,t.jsxs)("span",{children:[(0,t.jsx)(ej.A,{className:"w-4 h-4 mr-2"}),"选择文件"]})}),(0,t.jsx)("input",{id:"import-file",type:"file",accept:".json",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){if("application/json"===a.type){let e=new FileReader;e.onload=e=>{try{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result;ed.DT.importData(a)?(alert("数据导入成功！请刷新页面查看更新。"),window.location.reload()):alert("数据导入失败，请检查文件格式。")}catch(e){console.error("导入失败:",e),alert("数据导入失败，请检查文件格式。")}},e.readAsText(a)}else alert("请选择JSON格式的文件")}},className:"hidden"})]})]})}),(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(ev.A,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-yellow-800",children:"导入注意事项"}),(0,t.jsxs)("ul",{className:"text-yellow-700 text-xs mt-1 space-y-1",children:[(0,t.jsx)("li",{children:"• 导入会覆盖现有数据，建议先导出备份"}),(0,t.jsx)("li",{children:"• 只支持本系统导出的JSON格式文件"}),(0,t.jsx)("li",{children:"• 导入后需要刷新页面查看更新"})]})]})]})})]})})]})]})}function eN(e){let{value:s,type:a,options:i=[],onSave:d,className:o="",placeholder:x="点击编辑",allowEmpty:h=!0,maxLength:f,variant:N="default",getDisplayColor:y,autoSaveOnBlur:w=!1,showSaveButtons:b=!0}=e,[C,S]=(0,l.useState)(!1),[D,A]=(0,l.useState)(s),W=(0,l.useRef)(null),R=(0,l.useRef)(null);(0,l.useEffect)(()=>{C&&"text"===a&&W.current?(W.current.focus(),W.current.select()):C&&"textarea"===a&&R.current&&R.current.focus()},[C,a]);let z=()=>{!(!h&&(!D||Array.isArray(D)&&0===D.length))&&(d(D),S(!1))},T=()=>{A(s),S(!1)},I=()=>{w&&z()},L=e=>{"Enter"===e.key&&"textarea"!==a?(e.preventDefault(),z()):"Escape"===e.key&&T()},E=e=>{Array.isArray(D)&&A(D.filter(s=>s!==e))};return C?(0,t.jsxs)("div",{className:"inline-edit-input border-2 border-blue-300 rounded-md bg-blue-50 p-1 shadow-sm ".concat(o),children:["text"===a&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c,{ref:W,value:D,onChange:e=>A(e.target.value),onKeyDown:L,onBlur:I,className:"h-8 text-sm",maxLength:f}),b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:z,children:(0,t.jsx)(m.A,{className:"w-3 h-3 text-green-600"})}),(0,t.jsx)(n.$,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:T,children:(0,t.jsx)(k.A,{className:"w-3 h-3 text-red-600"})})]})]}),"textarea"===a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(O.T,{ref:R,value:D,onChange:e=>A(e.target.value),onKeyDown:L,onBlur:I,className:"min-h-[60px] text-sm",maxLength:f}),b&&(0,t.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:T,children:"取消"}),(0,t.jsx)(n.$,{size:"sm",onClick:z,children:"保存"})]})]}),"select"===a&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(u,{value:D,onValueChange:e=>{A(e),d(e),S(!1)},children:[(0,t.jsx)(j,{className:"h-8 text-sm",children:(0,t.jsx)(p,{})}),(0,t.jsx)(g,{children:i.map(e=>{let s="string"==typeof e?e:e.value,a="string"==typeof e?e:e.label;return(0,t.jsx)(v,{value:s,children:a},s)})})]}),(0,t.jsx)(n.$,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:T,children:(0,t.jsx)(k.A,{className:"w-3 h-3 text-red-600"})})]}),"tags"===a&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:Array.isArray(D)&&D.map(e=>(0,t.jsxs)(r.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>E(e),children:(0,t.jsx)(k.A,{className:"h-2 w-2"})})]},e))}),(0,t.jsxs)(u,{onValueChange:e=>{Array.isArray(D)&&!D.includes(e)&&A([...D,e])},children:[(0,t.jsx)(j,{className:"h-8 text-sm",children:(0,t.jsx)(p,{placeholder:"添加标签"})}),(0,t.jsx)(g,{children:i.filter(e=>{let s="string"==typeof e?e:e.value;return!Array.isArray(D)||!D.includes(s)}).map(e=>{let s="string"==typeof e?e:e.value,a="string"==typeof e?e:e.label;return(0,t.jsx)(v,{value:s,children:a},s)})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,t.jsx)(n.$,{size:"sm",variant:"outline",onClick:T,children:"取消"}),(0,t.jsx)(n.$,{size:"sm",onClick:z,children:"保存"})]})]})]}):(0,t.jsx)("div",{className:"group inline-edit-display cursor-pointer hover:bg-blue-50 hover:border-blue-200 p-2 rounded border border-transparent transition-all duration-200 ".concat(o),onClick:()=>S(!0),children:"tags"===a&&Array.isArray(s)?(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.length>0?s.map(e=>(0,t.jsx)(r.E,{variant:"secondary",className:"text-xs",children:e},e)):(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:x}),(0,t.jsx)(ee.A,{className:"w-3 h-3 text-gray-400 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]}):"status"===N||"priority"===N?(0,t.jsxs)("div",{className:"flex items-center gap-1 group",children:[(0,t.jsx)(r.E,{className:"".concat((null==y?void 0:y(s))||""," text-xs"),children:s||x}),(0,t.jsx)(ee.A,{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-1 group",children:[(0,t.jsx)("span",{className:s?"":"text-gray-400",children:s||x}),(0,t.jsx)(ee.A,{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})})}var ey=a(9330);let ew=ey.bL,eb=ey.l9,ek=l.forwardRef((e,s)=>{let{className:a,align:l="center",sideOffset:r=4,...n}=e;return(0,t.jsx)(ey.ZL,{children:(0,t.jsx)(ey.UC,{ref:s,align:l,sideOffset:r,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});ek.displayName=ey.UC.displayName;var eC=a(7740);function eS(e){let{className:s,...a}=e;return(0,t.jsx)(eC.uB,{"data-slot":"command",className:(0,d.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",s),...a})}function eD(e){let{className:s,...a}=e;return(0,t.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,t.jsx)(V.A,{className:"size-4 shrink-0 opacity-50"}),(0,t.jsx)(eC.uB.Input,{"data-slot":"command-input",className:(0,d.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",s),...a})]})}function eA(e){let{...s}=e;return(0,t.jsx)(eC.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...s})}function eW(e){let{className:s,...a}=e;return(0,t.jsx)(eC.uB.Group,{"data-slot":"command-group",className:(0,d.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",s),...a})}function eR(e){let{className:s,...a}=e;return(0,t.jsx)(eC.uB.Item,{"data-slot":"command-item",className:(0,d.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}let ez=[{id:"1",name:"张三",role:"产品经理",avatar:"/placeholder.svg?height=24&width=24",email:"zhangsan@company.com"},{id:"2",name:"李四",role:"前端开发",avatar:"/placeholder.svg?height=24&width=24",email:"lisi@company.com"},{id:"3",name:"王五",role:"后端开发",avatar:"/placeholder.svg?height=24&width=24",email:"wangwu@company.com"},{id:"4",name:"赵六",role:"数据工程师",avatar:"/placeholder.svg?height=24&width=24",email:"zhaoliu@company.com"},{id:"5",name:"钱七",role:"测试工程师",avatar:"/placeholder.svg?height=24&width=24",email:"qianqi@company.com"},{id:"6",name:"陈七",role:"技术经理",avatar:"/placeholder.svg?height=24&width=24",email:"chenqi@company.com"},{id:"7",name:"刘十一",role:"产品总监",avatar:"/placeholder.svg?height=24&width=24",email:"liushiyi@company.com"},{id:"8",name:"王小明",role:"架构师",avatar:"/placeholder.svg?height=24&width=24",email:"wangxiaoming@company.com"}];function eT(e){let{selectedMembers:s,onMembersChange:a,maxMembers:i=10,placeholder:c="选择团队成员",className:o=""}=e,[x,h]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),j=e=>{s.some(s=>s.id===e.id)?a(s.filter(s=>s.id!==e.id)):s.length<i&&a([...s,e])},g=(e,t)=>{t.stopPropagation(),a(s.filter(s=>s.id!==e))},v=ez.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.role.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase()));return(0,t.jsx)("div",{className:o,children:(0,t.jsxs)(ew,{open:x,onOpenChange:h,children:[(0,t.jsx)(eb,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-full justify-start text-left font-normal",children:[s.length>0?(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 flex-1",children:[s.slice(0,3).map(e=>(0,t.jsxs)(r.E,{variant:"secondary",className:"flex items-center gap-1 text-xs",children:[(0,t.jsxs)(et.eu,{className:"w-4 h-4",children:[(0,t.jsx)(et.BK,{src:e.avatar||"/placeholder.svg"}),(0,t.jsx)(et.q5,{className:"text-xs",children:e.name[0]})]}),e.name,(0,t.jsx)(k.A,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:s=>g(e.id,s)})]},e.id)),s.length>3&&(0,t.jsxs)(r.E,{variant:"secondary",className:"text-xs",children:["+",s.length-3]})]}):(0,t.jsx)("span",{className:"text-gray-400",children:c}),(0,t.jsx)(es.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsxs)(ek,{className:"w-80 p-0",align:"start",children:[(0,t.jsxs)(eS,{children:[(0,t.jsx)(eD,{placeholder:"搜索团队成员...",value:u,onValueChange:p}),(0,t.jsx)(eA,{children:"没有找到相关成员"}),(0,t.jsx)(eW,{className:"max-h-64 overflow-auto",children:v.map(e=>{let a=s.some(s=>s.id===e.id),l=s.length<i||a;return(0,t.jsxs)(eR,{disabled:!l,onSelect:()=>l&&j(e),className:"flex items-center gap-2 p-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsxs)(et.eu,{className:"w-8 h-8",children:[(0,t.jsx)(et.BK,{src:e.avatar||"/placeholder.svg"}),(0,t.jsx)(et.q5,{className:"text-sm",children:e.name[0]})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.role})]})]}),(0,t.jsx)(m.A,{className:(0,d.cn)("h-4 w-4",a?"opacity-100":"opacity-0")})]},e.id)})})]}),s.length>0&&(0,t.jsxs)("div",{className:"border-t p-2",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["已选择 ",s.length,"/",i," 人"]}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a([]),children:"清空选择"})]})]})]})})}function eO(e){let{columns:s,onColumnResize:a,children:r,className:n=""}=e,[i,d]=(0,l.useState)(s),[c,o]=(0,l.useState)(null),[x,m]=(0,l.useState)(0),[h,u]=(0,l.useState)(0),p=(0,l.useRef)(null),j=(e,s)=>{let a=i.find(e=>e.id===s);a&&(o(s),m(e.clientX),u(a.width),document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),document.body.style.cursor="col-resize",document.body.style.userSelect="none")},g=e=>{if(!c)return;let s=i.find(e=>e.id===c);if(!s)return;let t=h+(e.clientX-x);s.minWidth&&t<s.minWidth&&(t=s.minWidth),s.maxWidth&&t>s.maxWidth&&(t=s.maxWidth),d(e=>e.map(e=>e.id===c?{...e,width:t}:e)),a&&a(c,t)},v=()=>{o(null),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),document.body.style.cursor="",document.body.style.userSelect=""};return(0,l.useEffect)(()=>()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v)},[]),(0,t.jsx)("div",{className:"overflow-x-auto ".concat(n),children:(0,t.jsxs)(L,{ref:p,style:{minWidth:i.reduce((e,s)=>e+s.width,0)},children:[(0,t.jsx)(E,{children:(0,t.jsx)(J,{className:"bg-gray-50",children:i.map((e,s)=>(0,t.jsxs)(M,{className:"relative border-r border-gray-200 last:border-r-0",style:{width:e.width,minWidth:e.width,maxWidth:e.width},children:[e.title,s<i.length-1&&(0,t.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-400 transition-colors",onMouseDown:s=>j(s,e.id),style:{backgroundColor:c===e.id?"#3b82f6":"transparent",width:"4px",marginRight:"-2px"}})]},e.id))})}),(0,t.jsx)(P,{children:r})]})})}function eI(e){let{columnId:s,columns:a,children:l,className:r=""}=e,n=a.find(e=>e.id===s),i=(null==n?void 0:n.width)||"auto";return(0,t.jsx)(B,{className:r,style:{width:i,minWidth:i,maxWidth:i},children:l})}let eL=["支付","用户体验","性能优化","移动端","重构","数据分析","可视化","实时处理","权限管理","安全","API网关","基础设施"],eE=["产品开发","技术重构","数据平台","系统优化","基础设施"],eP=[{id:"expand",title:"",width:40,minWidth:40,maxWidth:40},{id:"info",title:"项目信息",width:250,minWidth:200,maxWidth:400},{id:"category",title:"分类",width:120,minWidth:100,maxWidth:180},{id:"tags",title:"标签",width:150,minWidth:120,maxWidth:200},{id:"status",title:"状态",width:100,minWidth:80,maxWidth:120},{id:"progress_daily",title:"每日进展",width:300,minWidth:250,maxWidth:400},{id:"priority",title:"优先级",width:80,minWidth:60,maxWidth:100},{id:"progress",title:"进度",width:100,minWidth:80,maxWidth:120},{id:"assignees",title:"项目负责人",width:200,minWidth:150,maxWidth:300},{id:"milestones",title:"关键节点",width:250,minWidth:200,maxWidth:350},{id:"timeline",title:"时间周期",width:120,minWidth:100,maxWidth:150},{id:"risks",title:"风险",width:100,minWidth:80,maxWidth:120},{id:"actions",title:"操作",width:120,minWidth:100,maxWidth:150}],eJ=e=>{switch(e){case"PRD评审":return"bg-blue-100 text-blue-800";case"技术评审":return"bg-purple-100 text-purple-800";case"技术开发":return"bg-orange-100 text-orange-800";case"联调":return"bg-yellow-100 text-yellow-800";case"测试":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},eM=e=>{switch(e){case"高":return"bg-red-100 text-red-800";case"中":return"bg-yellow-100 text-yellow-800";case"低":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},eB=e=>{switch(e){case"高":return"text-red-600";case"中":return"text-yellow-600";case"低":return"text-green-600";default:return"text-gray-600"}},e$=e=>{switch(e){case"completed":return"✅";case"in-progress":return"\uD83D\uDD04";default:return"⏳"}};function eZ(){var e;let{projects:s,loading:a,addProject:d,updateProject:o,deleteProject:m,addProjectUpdate:h,updateProjectProgress:f}=(0,ea.Y)(),{searchTerm:N,setSearchTerm:b,statusFilter:D,setStatusFilter:A,priorityFilter:L,setPriorityFilter:E,categoryFilter:P,setCategoryFilter:M,tagFilter:$,setTagFilter:et,filteredProjects:el}=(0,ea.G)(s),[er,en]=(0,l.useState)(new Set),[ei,ed]=(0,l.useState)(null),[ec,ex]=(0,l.useState)(""),[em,eh]=(0,l.useState)(null),[eu,ep]=(0,l.useState)({}),[ej,eg]=(0,l.useState)(!1),[ev,ey]=(0,l.useState)(eP),ew=e=>{let s=new Set(er);s.has(e)?s.delete(e):s.add(e),en(s)},eb=e=>{ec.trim()&&(h(e,ec.trim()),ex(""),ed(null))},ek=e=>{eh(e),ep({name:e.name,description:e.description,status:e.status,priority:e.priority,category:e.category,tags:[...e.tags],startDate:e.startDate,endDate:e.endDate})},eC=e=>{eu.tags&&ep({...eu,tags:eu.tags.filter(s=>s!==e)})},eS=()=>{let e=d({name:"新项目",description:"请编辑项目描述",status:"PRD评审",priority:"中",category:"产品开发",tags:[],progress:0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],owner:{name:"当前用户",avatar:"/placeholder.svg?height=24&width=24",role:"项目经理",email:"user@company.com"},team:{},milestones:{prd:{status:"pending",date:null,plannedDate:new Date().toISOString().split("T")[0],owner:"当前用户"},techReview:{status:"pending",date:null,plannedDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],owner:"当前用户"},development:{status:"pending",date:null,plannedDate:new Date(Date.now()+12096e5).toISOString().split("T")[0],owner:"当前用户"},integration:{status:"pending",date:null,plannedDate:new Date(Date.now()+18144e5).toISOString().split("T")[0],owner:"当前用户"},testing:{status:"pending",date:null,plannedDate:new Date(Date.now()+24192e5).toISOString().split("T")[0],owner:"当前用户"},launch:{status:"pending",date:null,plannedDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],owner:"当前用户"}},requirements:[],dailyProgress:"项目刚刚创建",lastUpdate:new Date().toISOString().split("T")[0],risks:[],updates:[]});eg(!1),ek(e)};return a?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"加载项目数据中..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"项目管理中心"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"PMO项目进度跟踪与需求管理平台"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(n.$,{size:"sm",onClick:eS,children:[(0,t.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"新建项目"]})})]})})}),(0,t.jsx)("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)(y.tU,{defaultValue:"projects",className:"space-y-4",children:[(0,t.jsxs)(y.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(y.Xi,{value:"projects",children:"项目列表"}),(0,t.jsx)(y.Xi,{value:"dashboard",children:"数据看板"}),(0,t.jsx)(y.Xi,{value:"team",children:"团队管理"}),(0,t.jsx)(y.Xi,{value:"export",children:"数据管理"})]}),(0,t.jsxs)(y.av,{value:"projects",className:"space-y-4",children:[(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(V.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)(c,{placeholder:"搜索项目名称或描述...",value:N,onChange:e=>b(e.target.value),className:"pl-10 h-9"})]})}),(0,t.jsxs)(u,{value:P,onValueChange:M,children:[(0,t.jsx)(j,{className:"w-[150px] h-9",children:(0,t.jsx)(p,{placeholder:"项目分类"})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"all",children:"全部分类"}),eE.map(e=>(0,t.jsx)(v,{value:e,children:e},e))]})]}),(0,t.jsxs)(u,{value:$,onValueChange:et,children:[(0,t.jsxs)(j,{className:"w-[150px] h-9",children:[(0,t.jsx)(q.A,{className:"w-4 h-4 mr-2"}),(0,t.jsx)(p,{placeholder:"标签筛选"})]}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"all",children:"全部标签"}),eL.map(e=>(0,t.jsx)(v,{value:e,children:e},e))]})]}),(0,t.jsxs)(u,{value:D,onValueChange:A,children:[(0,t.jsxs)(j,{className:"w-[150px] h-9",children:[(0,t.jsx)(U.A,{className:"w-4 h-4 mr-2"}),(0,t.jsx)(p,{placeholder:"状态筛选"})]}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"all",children:"全部状态"}),(0,t.jsx)(v,{value:"PRD评审",children:"PRD评审"}),(0,t.jsx)(v,{value:"技术评审",children:"技术评审"}),(0,t.jsx)(v,{value:"技术开发",children:"技术开发"}),(0,t.jsx)(v,{value:"联调",children:"联调"}),(0,t.jsx)(v,{value:"测试",children:"测试"}),(0,t.jsx)(v,{value:"上线",children:"上线"})]})]}),(0,t.jsxs)(u,{value:L,onValueChange:E,children:[(0,t.jsx)(j,{className:"w-[150px] h-9",children:(0,t.jsx)(p,{placeholder:"优先级筛选"})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"all",children:"全部优先级"}),(0,t.jsx)(v,{value:"高",children:"高优先级"}),(0,t.jsx)(v,{value:"中",children:"中优先级"}),(0,t.jsx)(v,{value:"低",children:"低优先级"})]})]})]})})}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-0",children:(0,t.jsxs)(eO,{columns:ev,onColumnResize:(e,s)=>{ey(a=>a.map(a=>a.id===e?{...a,width:s}:a))},className:"overflow-x-auto",children:[el.map(e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(J,{className:"hover:bg-gray-50",children:[(0,t.jsx)(eI,{columnId:"expand",columns:ev,children:(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>ew(e.id),children:er.has(e.id)?(0,t.jsx)(x.A,{className:"h-4 w-4"}):(0,t.jsx)(K.A,{className:"h-4 w-4"})})}),(0,t.jsx)(eI,{columnId:"info",columns:ev,children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(eN,{value:e.name,type:"text",onSave:s=>o(e.id,{name:s}),className:"font-medium text-sm",maxLength:100}),(0,t.jsx)(eN,{value:e.description,type:"textarea",onSave:s=>o(e.id,{description:s}),className:"text-xs text-gray-600",placeholder:"添加项目描述",maxLength:500})]})}),(0,t.jsx)(eI,{columnId:"category",columns:ev,children:(0,t.jsx)(eN,{value:e.category,type:"select",options:eE,onSave:s=>o(e.id,{category:s}),className:"text-xs"})}),(0,t.jsx)(eI,{columnId:"tags",columns:ev,children:(0,t.jsx)(eN,{value:e.tags,type:"tags",options:eL,onSave:s=>o(e.id,{tags:s}),className:"text-xs",placeholder:"添加标签"})}),(0,t.jsx)(eI,{columnId:"status",columns:ev,children:(0,t.jsx)(eN,{value:e.status,type:"select",options:["PRD评审","技术评审","技术开发","联调","测试","上线"],onSave:s=>o(e.id,{status:s}),className:"text-xs",variant:"status",getDisplayColor:eJ})}),(0,t.jsx)(eI,{columnId:"progress_daily",columns:ev,children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(eN,{value:e.dailyProgress,type:"textarea",onSave:s=>o(e.id,{dailyProgress:s,lastUpdate:new Date().toISOString().split("T")[0]}),className:"text-xs text-gray-700 w-full",placeholder:"点击添加每日进展...",maxLength:1e3,autoSaveOnBlur:!0,showSaveButtons:!1})}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,t.jsx)(X.A,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:["更新: ",e.lastUpdate]})]})]})}),(0,t.jsx)(eI,{columnId:"priority",columns:ev,children:(0,t.jsx)(eN,{value:e.priority,type:"select",options:["高","中","低"],onSave:s=>o(e.id,{priority:s}),className:"text-xs",variant:"priority",getDisplayColor:eM})}),(0,t.jsx)(eI,{columnId:"progress",columns:ev,children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(w.k,{value:e.progress,className:"h-2"}),(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:[e.progress,"%"]})]})}),(0,t.jsx)(eI,{columnId:"assignees",columns:ev,children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(eT,{selectedMembers:e.assignees||[],onMembersChange:s=>{o(e.id,{assignees:s})},placeholder:"分配负责人",maxMembers:5,className:"w-full"})})}),(0,t.jsx)(eI,{columnId:"milestones",columns:ev,children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)("span",{children:e$(e.milestones.prd.status)}),(0,t.jsx)("span",{children:"PRD"})]}),(0,t.jsx)("div",{className:"text-gray-500",children:e.milestones.prd.plannedDate})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)("span",{children:e$(e.milestones.development.status)}),(0,t.jsx)("span",{children:"开发"})]}),(0,t.jsx)("div",{className:"text-gray-500",children:e.milestones.development.plannedDate})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)("span",{children:e$(e.milestones.launch.status)}),(0,t.jsx)("span",{children:"上线"})]}),(0,t.jsx)("div",{className:"text-gray-500",children:e.milestones.launch.plannedDate})]})]})}),(0,t.jsx)(eI,{columnId:"timeline",columns:ev,children:(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(Y.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"开始"})]}),(0,t.jsx)("div",{className:"text-gray-600",children:e.startDate}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(H.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"结束"})]}),(0,t.jsx)("div",{className:"text-gray-600",children:e.endDate})]})}),(0,t.jsx)(eI,{columnId:"risks",columns:ev,children:(0,t.jsx)("div",{className:"space-y-1",children:e.risks.length>0?e.risks.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(G.A,{className:"w-3 h-3 ".concat(eB(e.level))}),(0,t.jsx)("span",{className:"text-xs ".concat(eB(e.level)),children:e.level})]},s)):(0,t.jsx)("span",{className:"text-xs text-green-600",children:"无风险"})})}),(0,t.jsx)(eI,{columnId:"actions",columns:ev,children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)(C,{children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"outline",size:"sm",className:"h-7 px-2 bg-transparent",onClick:()=>ed(e),children:[(0,t.jsx)(Q.A,{className:"w-3 h-3 mr-1"}),"日报"]})}),(0,t.jsxs)(W,{className:"sm:max-w-md",children:[(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{children:"更新每日进度"}),(0,t.jsxs)(T,{children:["项目: ",e.name]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"progress",children:"昨日进展"}),(0,t.jsx)("div",{className:"p-2 bg-gray-50 rounded text-sm max-h-20 overflow-y-auto",children:e.dailyProgress}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["最后更新: ",e.lastUpdate]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"update",children:"今日进展"}),(0,t.jsx)(O.T,{id:"update",placeholder:"输入今日工作进展...",value:ec,onChange:e=>ex(e.target.value),className:"min-h-[80px]"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{ex(""),ed(null)},children:"取消"}),(0,t.jsx)(n.$,{size:"sm",onClick:()=>eb(e.id),children:"更新"})]})]})]})]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",className:"h-7 px-2 bg-transparent",onClick:()=>ek(e),children:[(0,t.jsx)(ee.A,{className:"w-3 h-3 mr-1"}),"编辑"]})]})})]},e.id),er.has(e.id)&&(0,t.jsx)(J,{children:(0,t.jsx)(B,{colSpan:13,className:"bg-gray-50 p-0",children:(0,t.jsx)(Z,{open:er.has(e.id),children:(0,t.jsx)(_,{children:(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[(0,t.jsx)(H.A,{className:"w-4 h-4"}),"详细里程碑"]}),(0,t.jsx)("div",{className:"grid grid-cols-6 gap-3",children:Object.entries(e.milestones).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"bg-white p-2 rounded border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,t.jsx)("span",{children:e$(a.status)}),(0,t.jsx)("span",{className:"text-xs font-medium",children:{prd:"PRD评审",techReview:"技术评审",development:"技术开发",integration:"联调",testing:"测试",launch:"上线"}[s]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,t.jsxs)("div",{children:["计划: ",a.plannedDate]}),a.date&&(0,t.jsxs)("div",{children:["实际: ",a.date]}),(0,t.jsxs)("div",{children:["负责: ",a.owner]})]})]},s)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[(0,t.jsx)(es.A,{className:"w-4 h-4"}),"需求列表"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:e.requirements.map(e=>(0,t.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("h5",{className:"text-xs font-medium",children:e.title}),(0,t.jsx)(r.E,{className:"".concat(eJ(e.status)," text-xs"),children:e.status})]}),(0,t.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"优先级:"}),(0,t.jsx)(r.E,{className:"".concat(eM(e.priority)," text-xs"),children:e.priority})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"负责人:"}),(0,t.jsx)("span",{children:e.assignee})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"进度:"}),(0,t.jsxs)("span",{children:[e.progress,"%"]})]}),(0,t.jsx)(w.k,{value:e.progress,className:"h-1 mt-1"})]})]},e.id))})]}),e.risks.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"w-4 h-4"}),"风险详情"]}),(0,t.jsx)("div",{className:"space-y-2",children:e.risks.map((e,s)=>(0,t.jsxs)("div",{className:"bg-white p-2 rounded border flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"w-4 h-4 ".concat(eB(e.level))}),(0,t.jsxs)("span",{className:"text-xs font-medium ".concat(eB(e.level)),children:[e.level,"风险:"]}),(0,t.jsx)("span",{className:"text-xs text-gray-700",children:e.description})]},s))})]})]})})})})})]})),(0,t.jsx)(J,{className:"hover:bg-blue-50 border-t-2 border-blue-200",children:(0,t.jsx)(B,{colSpan:13,className:"text-center py-4",children:(0,t.jsxs)(n.$,{variant:"ghost",className:"w-full h-12 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:eS,children:[(0,t.jsx)(F.A,{className:"w-5 h-5 mr-2"}),"新建项目"]})})})]})})})]}),(0,t.jsx)(y.av,{value:"dashboard",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"总项目数"})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2 较上月"})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"进行中项目"})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.filter(e=>!["上线","已完成"].includes(e.status)).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"活跃项目数量"})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"高优先级项目"})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.filter(e=>"高"===e.priority).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"需重点关注"})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(i.ZB,{className:"text-sm font-medium",children:"平均进度"})}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(s.reduce((e,s)=>e+s.progress,0)/s.length),"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"整体项目进度"})]})]})]})}),(0,t.jsx)(y.av,{value:"team",className:"space-y-6",children:(0,t.jsx)(eo,{})}),(0,t.jsx)(y.av,{value:"export",className:"space-y-6",children:(0,t.jsx)(ef,{})})]})}),(0,t.jsx)(C,{open:!!em,onOpenChange:()=>eh(null),children:(0,t.jsxs)(W,{className:"sm:max-w-2xl",children:[(0,t.jsxs)(R,{children:[(0,t.jsx)(z,{children:"编辑项目"}),(0,t.jsx)(T,{children:"修改项目的基本信息和设置"})]}),em&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"name",children:"项目名称"}),(0,t.jsx)(c,{id:"name",value:eu.name||"",onChange:e=>ep({...eu,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"category",children:"项目分类"}),(0,t.jsxs)(u,{value:eu.category||"",onValueChange:e=>ep({...eu,category:e}),children:[(0,t.jsx)(j,{children:(0,t.jsx)(p,{placeholder:"选择分类"})}),(0,t.jsx)(g,{children:eE.map(e=>(0,t.jsx)(v,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"description",children:"项目描述"}),(0,t.jsx)(O.T,{id:"description",value:eu.description||"",onChange:e=>ep({...eu,description:e.target.value}),className:"min-h-[80px]"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"status",children:"项目状态"}),(0,t.jsxs)(u,{value:eu.status||"",onValueChange:e=>ep({...eu,status:e}),children:[(0,t.jsx)(j,{children:(0,t.jsx)(p,{placeholder:"选择状态"})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"PRD评审",children:"PRD评审"}),(0,t.jsx)(v,{value:"技术评审",children:"技术评审"}),(0,t.jsx)(v,{value:"技术开发",children:"技术开发"}),(0,t.jsx)(v,{value:"联调",children:"联调"}),(0,t.jsx)(v,{value:"测试",children:"测试"}),(0,t.jsx)(v,{value:"上线",children:"上线"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"priority",children:"优先级"}),(0,t.jsxs)(u,{value:eu.priority||"",onValueChange:e=>ep({...eu,priority:e}),children:[(0,t.jsx)(j,{children:(0,t.jsx)(p,{placeholder:"选择优先级"})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{value:"高",children:"高"}),(0,t.jsx)(v,{value:"中",children:"中"}),(0,t.jsx)(v,{value:"低",children:"低"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{children:"快速添加标签"}),(0,t.jsxs)(u,{onValueChange:e=>{eu.tags&&!eu.tags.includes(e)&&ep({...eu,tags:[...eu.tags,e]})},children:[(0,t.jsx)(j,{children:(0,t.jsx)(p,{placeholder:"选择标签"})}),(0,t.jsx)(g,{children:eL.filter(e=>{var s;return!(null===(s=eu.tags)||void 0===s?void 0:s.includes(e))}).map(e=>(0,t.jsx)(v,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{children:"项目标签"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(e=eu.tags)||void 0===e?void 0:e.map(e=>(0,t.jsxs)(r.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>eC(e),children:(0,t.jsx)(k.A,{className:"h-3 w-3"})})]},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"startDate",children:"开始时间"}),(0,t.jsx)(c,{id:"startDate",type:"date",value:eu.startDate||"",onChange:e=>ep({...eu,startDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I.J,{htmlFor:"endDate",children:"结束时间"}),(0,t.jsx)(c,{id:"endDate",type:"date",value:eu.endDate||"",onChange:e=>ep({...eu,endDate:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:()=>eh(null),children:"取消"}),(0,t.jsx)(n.$,{onClick:()=>{em&&eu&&(o(em.id,eu),eh(null),ep({}))},children:"保存"})]})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[435,801,120,441,684,358],()=>s(2323)),_N_E=e.O()}]);